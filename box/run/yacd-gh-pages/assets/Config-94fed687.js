import{r as N,R as d,P as p,j as t,s as V,e as S,c as se,h as re,i as B,k as D,l as oe,b as U,n as ae,g as G,o as le,q as ie,t as k,v as ce,w as de,x as ue,y as pe,z as me,u as he,A as fe,C as ge,B as y,D as xe,E as ve,F as je,G as ye}from"./index-9f06cd93.js";import{r as be}from"./logs-629ec80a.js";import{S as w,T as F}from"./Select-8b44e8a8.js";import{R as ke}from"./rotate-cw-2e9848d5.js";function _(){return _=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},_.apply(this,arguments)}function we(e,a){if(e==null)return{};var r=Ce(e,a),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)s=o[n],!(a.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Ce(e,a){if(e==null)return{};var r={},s=Object.keys(e),n,o;for(o=0;o<s.length;o++)n=s[o],!(a.indexOf(n)>=0)&&(r[n]=e[n]);return r}var E=N.forwardRef(function(e,a){var r=e.color,s=r===void 0?"currentColor":r,n=e.size,o=n===void 0?24:n,c=we(e,["color","size"]);return d.createElement("svg",_({ref:a,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),d.createElement("polyline",{points:"8 17 12 21 16 17"}),d.createElement("line",{x1:"12",y1:"12",x2:"12",y2:"21"}),d.createElement("path",{d:"M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"}))});E.propTypes={color:p.string,size:p.oneOfType([p.string,p.number])};E.displayName="DownloadCloud";const _e=E;function O(){return O=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},O.apply(this,arguments)}function Oe(e,a){if(e==null)return{};var r=Pe(e,a),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)s=o[n],!(a.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Pe(e,a){if(e==null)return{};var r={},s=Object.keys(e),n,o;for(o=0;o<s.length;o++)n=s[o],!(a.indexOf(n)>=0)&&(r[n]=e[n]);return r}var I=N.forwardRef(function(e,a){var r=e.color,s=r===void 0?"currentColor":r,n=e.size,o=n===void 0?24:n,c=Oe(e,["color","size"]);return d.createElement("svg",O({ref:a,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),d.createElement("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),d.createElement("polyline",{points:"16 17 21 12 16 7"}),d.createElement("line",{x1:"21",y1:"12",x2:"9",y2:"12"}))});I.propTypes={color:p.string,size:p.oneOfType([p.string,p.number])};I.displayName="LogOut";const Ne=I;function P(){return P=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},P.apply(this,arguments)}function Se(e,a){if(e==null)return{};var r=Ee(e,a),s,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)s=o[n],!(a.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Ee(e,a){if(e==null)return{};var r={},s=Object.keys(e),n,o;for(o=0;o<s.length;o++)n=s[o],!(a.indexOf(n)>=0)&&(r[n]=e[n]);return r}var L=N.forwardRef(function(e,a){var r=e.color,s=r===void 0?"currentColor":r,n=e.size,o=n===void 0?24:n,c=Se(e,["color","size"]);return d.createElement("svg",P({ref:a,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),d.createElement("polyline",{points:"3 6 5 6 21 6"}),d.createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),d.createElement("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),d.createElement("line",{x1:"14",y1:"11",x2:"14",y2:"17"}))});L.propTypes={color:p.string,size:p.oneOfType([p.string,p.number])};L.displayName="Trash2";const Ie=L,{useState:Le,useRef:$e,useEffect:ze,useCallback:Te}=S;function Re(e){return t.jsx("input",{className:V.input,...e})}function Me({value:e,...a}){const[r,s]=Le(e),n=$e(e);ze(()=>{n.current!==e&&s(e),n.current=e},[e]);const o=Te(c=>s(c.target.value),[s]);return t.jsx("input",{className:V.input,value:r,onChange:o,...a})}const Ae="_root_1li6d_1",Be="_section_1li6d_2",De="_item_1li6d_15",Fe="_sep_1li6d_35",We="_label_1li6d_48",i={root:Ae,section:Be,item:De,sep:Fe,label:We},Ve="_fieldset_1ghjp_1",Ue="_input_1ghjp_9",Ge="_cnt_1ghjp_9",C={fieldset:Ve,input:Ue,cnt:Ge};function He({OptionComponent:e,optionPropsList:a,selectedIndex:r,onChange:s}){const n=se("visually-hidden",C.input),o=c=>{s(c.target.value)};return t.jsx("fieldset",{className:C.fieldset,children:a.map((c,g)=>t.jsxs("label",{children:[t.jsx("input",{type:"radio",checked:r===g,name:"selection",value:g,"aria-labelledby":"traffic chart type "+g,onChange:o,className:n}),t.jsx("div",{className:C.cnt,children:t.jsx(e,{...c})})]},g))})}const{useMemo:qe}=S,Je={plugins:{legend:{display:!1}},scales:{x:{display:!1,type:"category"},y:{display:!1,type:"linear"}}},H=[23e3,35e3,46e3,33e3,9e4,68e3,23e3,45e3],Ke=[184e3,183e3,196e3,182e3,19e4,186e3,182e3,189e3],Qe=H;function Xe({id:e}){const a=re.read(),r=qe(()=>({labels:Qe,datasets:[{...B,...D[e].up,data:H},{...B,...D[e].down,data:Ke}]}),[e]),s="chart-"+e;return oe(a.Chart,s,r,null,Je),t.jsx("div",{style:{width:100,padding:5},children:t.jsx("canvas",{id:s})})}const{useEffect:q,useState:Ye,useCallback:f,useRef:Ze,useMemo:W}=S,et=[{id:0},{id:1},{id:2},{id:3}],tt=[["debug","Debug"],["info","Info"],["warning","Warning"],["error","Error"],["silent","Silent"]],nt=[{key:"port",label:"HTTP Proxy Port"},{key:"socks-port",label:"SOCKS5 Proxy Port"},{key:"mixed-port",label:"Mixed Port"},{key:"redir-port",label:"Redir Port"},{key:"tproxy-port",label:"tProxy Port"}],st=[["zh","中文"],["en","English"]],rt=e=>({configs:ae(e),apiConfig:G(e)}),ot=e=>({selectedChartStyleIndex:je(e),latencyTestUrl:ye(e),apiConfig:G(e)}),at=U(ot)(ct),ht=U(rt)(lt);function lt({dispatch:e,configs:a,apiConfig:r}){return q(()=>{e(le(r))},[e,r]),t.jsx(at,{configs:a})}function it(e){return e&&e.meta&&!e.premium?"Clash.Meta ":e&&e.meta&&e.premium?"sing-box ":"Clash Premium"}function ct({dispatch:e,configs:a,selectedChartStyleIndex:r,latencyTestUrl:s,apiConfig:n}){const[o,c]=Ye(a),g=Ze(a);q(()=>{g.current!==a&&c(a),g.current=a},[a]);const J=f(()=>{e(ie("apiConfig"))},[e]),v=f((l,u)=>{c({...o,[l]:u})},[o]),K=f(l=>{const u="allow-lan",h=l;v(u,h),e(k(n,{"allow-lan":h}))},[n,e,v]),j=f(({name:l,value:u})=>{switch(l){case"mode":case"log-level":v(l,u),e(k(n,{[l]:u})),l==="log-level"&&be({...n,logLevel:u});break;case"tproxy-port":case"redir-port":case"socks-port":case"mixed-port":case"port":if(u!==""){const h=parseInt(u,10);if(h<0||h>65535)return}v(l,u);break;default:return}},[n,e,v]),Q=f(l=>j(l.target),[j]),{selectChartStyleIndex:X,updateAppConfig:$}=ce(),z=f(l=>{const u=l.target,{name:h,value:A}=u;switch(h){case"port":case"socks-port":case"mixed-port":case"redir-port":case"tproxy-port":{const b=parseInt(A,10);if(b<0||b>65535)return;e(k(n,{[h]:b}));break}case"latencyTestUrl":{$(h,A);break}default:throw new Error(`unknown input name ${h}`)}},[n,e,$]),Y=f(()=>{e(de(n))},[n,e]),Z=f(()=>{e(ue(n))},[n,e]),ee=f(()=>{e(pe(n))},[n,e]),T=W(()=>{const l=o.mode;return typeof l=="string"&&l[0].toUpperCase()+l.slice(1)},[o.mode]),[te,ne]=me(xe),{t:m,i18n:R}=he(),{data:x}=fe(["/version",n],()=>ve("/version",n)),M=W(()=>o["mode-list"]||o.modes||["Global","Rule","Direct"],[o["mode-list"],o.modes]);return t.jsxs("div",{children:[t.jsx(ge,{title:m("Config")}),t.jsxs("div",{className:i.root,children:[x.meta&&x.premium||nt.map(l=>o[l.key]!==void 0?t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:l.label}),t.jsx(Re,{name:l.key,value:o[l.key],onChange:Q,onBlur:z})]},l.key):null),t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:"Mode"}),t.jsx(w,{options:M.map(l=>[l,l]),selected:M.find(l=>l.toLowerCase()===T.toLowerCase())||T,onChange:l=>j({name:"mode",value:l.target.value})})]}),t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:"Log Level"}),t.jsx(w,{options:tt,selected:o["log-level"],onChange:l=>j({name:"log-level",value:l.target.value})})]}),x.meta&&x.premium||t.jsx("div",{children:t.jsxs("div",{className:i.item,children:[t.jsx(F,{id:"config-allow-lan",checked:o["allow-lan"],onChange:K}),t.jsx("label",{htmlFor:"config-allow-lan",children:"Allow LAN"})]})})]}),t.jsx("div",{className:i.sep,children:t.jsx("div",{})}),t.jsxs("div",{className:i.section,children:[t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:"Reload"}),t.jsx(y,{start:t.jsx(ke,{size:16}),label:m("reload_config_file"),onClick:Y})]}),t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:"FakeIP"}),t.jsx(y,{start:t.jsx(Ie,{size:16}),label:m("flush_fake_ip_pool"),onClick:Z})]}),x.meta&&x.premium||t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:"GEO Databases"}),t.jsx(y,{start:t.jsx(_e,{size:16}),label:m("update_geo_databases_file"),onClick:ee})]})]}),t.jsx("div",{className:i.sep,children:t.jsx("div",{})}),t.jsxs("div",{className:i.section,children:[t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:m("latency_test_url")}),t.jsx(Me,{name:"latencyTestUrl",type:"text",value:s,onBlur:z})]}),t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:m("lang")}),t.jsx("div",{children:t.jsx(w,{options:st,selected:R.language,onChange:l=>R.changeLanguage(l.target.value)})})]}),t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:m("chart_style")}),t.jsx(He,{OptionComponent:Xe,optionPropsList:et,selectedIndex:r,onChange:X})]}),t.jsxs("div",{children:[t.jsxs("div",{className:i.label,children:[m("current_backend"),t.jsx("p",{children:it(x)+n.baseURL})]}),t.jsx("div",{className:i.label,children:"Action"}),t.jsx(y,{start:t.jsx(Ne,{size:16}),label:m("switch_backend"),onClick:J})]}),t.jsxs("div",{className:i.item,children:[t.jsx(F,{id:"dark-mode-pure-black-toggle",checked:te,onChange:ne}),t.jsx("label",{htmlFor:"dark-mode-pure-black-toggle",children:m("dark_mode_pure_black_toggle_label")})]})]})]})}export{ht as default};
