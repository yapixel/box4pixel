import{r as N,R as d,P as p,j as t,s as F,e as S,c as se,h as re,i as M,k as A,l as oe,b as W,n as ae,g as V,o as le,q as ie,t as k,v as ce,w as de,x as ue,y as pe,z as he,u as me,A as fe,C as ge,B as y,D as xe,E as ve,F as je,G as ye}from"./index-4eb88bdd.js";import{r as be}from"./logs-43c4b67d.js";import{S as w,T as B}from"./Select-396d54c3.js";import{R as ke}from"./rotate-cw-05bcfb63.js";function C(){return C=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},C.apply(this,arguments)}function we(e,o){if(e==null)return{};var r=_e(e,o),s,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)s=a[n],!(o.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function _e(e,o){if(e==null)return{};var r={},s=Object.keys(e),n,a;for(a=0;a<s.length;a++)n=s[a],!(o.indexOf(n)>=0)&&(r[n]=e[n]);return r}var E=N.forwardRef(function(e,o){var r=e.color,s=r===void 0?"currentColor":r,n=e.size,a=n===void 0?24:n,c=we(e,["color","size"]);return d.createElement("svg",C({ref:o,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),d.createElement("polyline",{points:"8 17 12 21 16 17"}),d.createElement("line",{x1:"12",y1:"12",x2:"12",y2:"21"}),d.createElement("path",{d:"M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"}))});E.propTypes={color:p.string,size:p.oneOfType([p.string,p.number])};E.displayName="DownloadCloud";const Ce=E;function O(){return O=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},O.apply(this,arguments)}function Oe(e,o){if(e==null)return{};var r=Pe(e,o),s,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)s=a[n],!(o.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Pe(e,o){if(e==null)return{};var r={},s=Object.keys(e),n,a;for(a=0;a<s.length;a++)n=s[a],!(o.indexOf(n)>=0)&&(r[n]=e[n]);return r}var I=N.forwardRef(function(e,o){var r=e.color,s=r===void 0?"currentColor":r,n=e.size,a=n===void 0?24:n,c=Oe(e,["color","size"]);return d.createElement("svg",O({ref:o,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),d.createElement("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),d.createElement("polyline",{points:"16 17 21 12 16 7"}),d.createElement("line",{x1:"21",y1:"12",x2:"9",y2:"12"}))});I.propTypes={color:p.string,size:p.oneOfType([p.string,p.number])};I.displayName="LogOut";const Ne=I;function P(){return P=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},P.apply(this,arguments)}function Se(e,o){if(e==null)return{};var r=Ee(e,o),s,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)s=a[n],!(o.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Ee(e,o){if(e==null)return{};var r={},s=Object.keys(e),n,a;for(a=0;a<s.length;a++)n=s[a],!(o.indexOf(n)>=0)&&(r[n]=e[n]);return r}var $=N.forwardRef(function(e,o){var r=e.color,s=r===void 0?"currentColor":r,n=e.size,a=n===void 0?24:n,c=Se(e,["color","size"]);return d.createElement("svg",P({ref:o,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),d.createElement("polyline",{points:"3 6 5 6 21 6"}),d.createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),d.createElement("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),d.createElement("line",{x1:"14",y1:"11",x2:"14",y2:"17"}))});$.propTypes={color:p.string,size:p.oneOfType([p.string,p.number])};$.displayName="Trash2";const Ie=$,{useState:$e,useRef:Le,useEffect:ze,useCallback:Te}=S;function Re(e){return t.jsx("input",{className:F.input,...e})}function Me({value:e,...o}){const[r,s]=$e(e),n=Le(e);ze(()=>{n.current!==e&&s(e),n.current=e},[e]);const a=Te(c=>s(c.target.value),[s]);return t.jsx("input",{className:F.input,value:r,onChange:a,...o})}const Ae="_root_1li6d_1",Be="_section_1li6d_2",De="_item_1li6d_15",Fe="_sep_1li6d_35",We="_label_1li6d_48",i={root:Ae,section:Be,item:De,sep:Fe,label:We},Ve="_fieldset_1ghjp_1",Ue="_input_1ghjp_9",Ge="_cnt_1ghjp_9",_={fieldset:Ve,input:Ue,cnt:Ge};function He({OptionComponent:e,optionPropsList:o,selectedIndex:r,onChange:s}){const n=se("visually-hidden",_.input),a=c=>{s(c.target.value)};return t.jsx("fieldset",{className:_.fieldset,children:o.map((c,g)=>t.jsxs("label",{children:[t.jsx("input",{type:"radio",checked:r===g,name:"selection",value:g,"aria-labelledby":"traffic chart type "+g,onChange:a,className:n}),t.jsx("div",{className:_.cnt,children:t.jsx(e,{...c})})]},g))})}const{useMemo:qe}=S,Je={plugins:{legend:{display:!1}},scales:{x:{display:!1,type:"category"},y:{display:!1,type:"linear"}}},U=[23e3,35e3,46e3,33e3,9e4,68e3,23e3,45e3],Ke=[184e3,183e3,196e3,182e3,19e4,186e3,182e3,189e3],Qe=U;function Xe({id:e}){const o=re.read(),r=qe(()=>({labels:Qe,datasets:[{...M,...A[e].up,data:U},{...M,...A[e].down,data:Ke}]}),[e]),s="chart-"+e;return oe(o.Chart,s,r,null,Je),t.jsx("div",{style:{width:100,padding:5},children:t.jsx("canvas",{id:s})})}const{useEffect:G,useState:Ye,useCallback:f,useRef:Ze,useMemo:D}=S,et=[{id:0},{id:1},{id:2},{id:3}],tt=[["debug","Debug"],["info","Info"],["warning","Warning"],["error","Error"],["silent","Silent"]],nt=[{key:"port",label:"HTTP Proxy Port"},{key:"socks-port",label:"SOCKS5 Proxy Port"},{key:"mixed-port",label:"Mixed Port"},{key:"redir-port",label:"Redir Port"},{key:"tproxy-port",label:"tProxy Port"}],st=[["zh","中文"],["en","English"]],rt=e=>({configs:ae(e),apiConfig:V(e)}),ot=e=>({selectedChartStyleIndex:je(e),latencyTestUrl:ye(e),apiConfig:V(e)}),at=W(ot)(ct),mt=W(rt)(lt);function lt({dispatch:e,configs:o,apiConfig:r}){return G(()=>{e(le(r))},[e,r]),t.jsx(at,{configs:o})}function it(e){return e&&e.meta&&!e.premium?"Clash.Meta ":e&&e.meta&&e.premium?"sing-box ":"Clash Premium"}function ct({dispatch:e,configs:o,selectedChartStyleIndex:r,latencyTestUrl:s,apiConfig:n}){const[a,c]=Ye(o),g=Ze(o);G(()=>{g.current!==o&&c(o),g.current=o},[o]);const H=f(()=>{e(ie("apiConfig"))},[e]),v=f((l,u)=>{c({...a,[l]:u})},[a]),q=f(l=>{const u="allow-lan",m=l;v(u,m),e(k(n,{"allow-lan":m}))},[n,e,v]),j=f(({name:l,value:u})=>{switch(l){case"mode":case"log-level":v(l,u),e(k(n,{[l]:u})),l==="log-level"&&be({...n,logLevel:u});break;case"tproxy-port":case"redir-port":case"socks-port":case"mixed-port":case"port":if(u!==""){const m=parseInt(u,10);if(m<0||m>65535)return}v(l,u);break;default:return}},[n,e,v]),J=f(l=>j(l.target),[j]),{selectChartStyleIndex:K,updateAppConfig:L}=ce(),z=f(l=>{const u=l.target,{name:m,value:R}=u;switch(m){case"port":case"socks-port":case"mixed-port":case"redir-port":case"tproxy-port":{const b=parseInt(R,10);if(b<0||b>65535)return;e(k(n,{[m]:b}));break}case"latencyTestUrl":{L(m,R);break}default:throw new Error(`unknown input name ${m}`)}},[n,e,L]),Q=f(()=>{e(de(n))},[n,e]),X=f(()=>{e(ue(n))},[n,e]),Y=f(()=>{e(pe(n))},[n,e]),Z=D(()=>{const l=a.mode;return typeof l=="string"&&l[0].toUpperCase()+l.slice(1)},[a.mode]),[ee,te]=he(xe),{t:h,i18n:T}=me(),{data:x}=fe(["/version",n],()=>ve("/version",n)),ne=D(()=>a.modes||["Global","Rule","Direct"],[a.modes]);return t.jsxs("div",{children:[t.jsx(ge,{title:h("Config")}),t.jsxs("div",{className:i.root,children:[x.meta&&x.premium||nt.map(l=>a[l.key]!==void 0?t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:l.label}),t.jsx(Re,{name:l.key,value:a[l.key],onChange:J,onBlur:z})]},l.key):null),t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:"Mode"}),t.jsx(w,{options:ne.map(l=>[l,l]),selected:Z,onChange:l=>j({name:"mode",value:l.target.value})})]}),t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:"Log Level"}),t.jsx(w,{options:tt,selected:a["log-level"],onChange:l=>j({name:"log-level",value:l.target.value})})]}),x.meta&&x.premium||t.jsx("div",{children:t.jsxs("div",{className:i.item,children:[t.jsx(B,{id:"config-allow-lan",checked:a["allow-lan"],onChange:q}),t.jsx("label",{htmlFor:"config-allow-lan",children:"Allow LAN"})]})})]}),t.jsx("div",{className:i.sep,children:t.jsx("div",{})}),t.jsxs("div",{className:i.section,children:[t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:"Reload"}),t.jsx(y,{start:t.jsx(ke,{size:16}),label:h("reload_config_file"),onClick:Q})]}),t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:"FakeIP"}),t.jsx(y,{start:t.jsx(Ie,{size:16}),label:h("flush_fake_ip_pool"),onClick:X})]}),x.meta&&x.premium||t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:"GEO Databases"}),t.jsx(y,{start:t.jsx(Ce,{size:16}),label:h("update_geo_databases_file"),onClick:Y})]})]}),t.jsx("div",{className:i.sep,children:t.jsx("div",{})}),t.jsxs("div",{className:i.section,children:[t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:h("latency_test_url")}),t.jsx(Me,{name:"latencyTestUrl",type:"text",value:s,onBlur:z})]}),t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:h("lang")}),t.jsx("div",{children:t.jsx(w,{options:st,selected:T.language,onChange:l=>T.changeLanguage(l.target.value)})})]}),t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:h("chart_style")}),t.jsx(He,{OptionComponent:Xe,optionPropsList:et,selectedIndex:r,onChange:K})]}),t.jsxs("div",{children:[t.jsxs("div",{className:i.label,children:[h("current_backend"),t.jsx("p",{children:it(x)+n.baseURL})]}),t.jsx("div",{className:i.label,children:"Action"}),t.jsx(y,{start:t.jsx(Ne,{size:16}),label:h("switch_backend"),onClick:H})]}),t.jsxs("div",{className:i.item,children:[t.jsx(B,{id:"dark-mode-pure-black-toggle",checked:ee,onChange:te}),t.jsx("label",{htmlFor:"dark-mode-pure-black-toggle",children:h("dark_mode_pure_black_toggle_label")})]})]})]})}export{mt as default};
